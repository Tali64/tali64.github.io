<!DOCTYPE html>
<html lang="en">
    <head>
        <script type="text/javascript">
            /*  
                MediaWiki Account Creation Script
                Demo of `createaccount` module: Create an account on a wiki without the special authentication extensions
                Original code for MediaWiki API Demos
                MIT license
            */
            function createWikiAccount() {
                const request = new XMLHttpRequest();
                var wikiUrl = "http://test.wikipedia.org/w/api.php";
                // Step 1: GET request to fetch createaccount token
                var authManager = request.open("GET", "https://test.wikipedia.org/w/api.php?action=query&meta=authmanagerinfo")
                var createToken = request.open("GET", "https://test.wikipedia.org/w/api.php?action=query&meta=tokens")
                // Step 2: POST request with the fetched token and other data (user information, return URL, etc.)  to the API to create an account
                var accountCreate = wikiUrl + "?action=createaccount&createreturnurl=http://test.wikipedia.org/&createtoken=" + createToken + "&username=MediaWikiAPITest&password=password&retype=password&captchaId=70020580&captchaWord=winedtyping"
                request.open("POST", )
            }
        </script>
    </head>
    <body>
        <p>This website is for testing the MediaWiki account creation API. So far, it can only create accounts on the <a href="https://test.wikipedia.org">Test Wikipedia.</a></p>
        <button onclick="createWikiAccount()">Create Account</button>
    </body>
</html>
